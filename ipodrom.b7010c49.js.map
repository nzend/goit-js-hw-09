{"mappings":"AAGA,MAAMA,EAAS,CAAC,QAAS,OAAQ,OAAQ,OAAQ,YAEjD,IAAIC,EAAc,EAElB,MAAMC,EAAO,CACXC,SAAUC,SAASC,cAAc,kBACjCC,YAAaF,SAASC,cAAc,cACpCE,cAAeH,SAASC,cAAc,gBACtCG,UAAWJ,SAASC,cAAc,8BA2BpC,SAASI,EAAkBC,GACzBR,EAAKI,YAAYK,YAAcD,C,CAEjC,SAASE,EAAoBF,GAC3BR,EAAKK,cAAcI,YAAcD,C,CA5BnCR,EAAKC,SAASU,iBAAiB,SAE/B,WACIZ,GAAe,EACf,MAAMa,EAAWd,EAAOe,KAAIC,GA0ChC,SAAaA,GACX,OAAO,IAAIC,SAAQC,IACjB,MAAMC,GAWaC,EAXQ,IAWHC,EAXS,KAY5BC,KAAKC,MAAMD,KAAKE,UAAYH,EAAMD,EAAM,GAAKA,IADtD,IAAuBA,EAAKC,EAVxBI,YAAW,KACTP,EAAQ,C,MAAEF,E,KAAOG,GAAO,GACvBA,EAAK,G,CA/C6BO,CAAIV,KACzCP,EAAkB,IAClBG,EAAoB,iBAMIe,EALLb,EAMrBG,QAAQW,KAAKD,GAASE,MAAK,EAACb,MAAEA,EAAKG,KAAEA,MACnCV,EAAkB,WAACO,oBAAuBG,KAiB9C,UAA4BH,MAAEA,EAAKG,KAAEA,IACnC,MAAMW,EAAK,6BACS7B,+BACAe,+BACAG,4BAEpBjB,EAAKM,UAAUuB,mBAAmB,YAAaD,E,CAtB3BE,CAAC,C,MAAEhB,E,KAAOG,GAAO,IAIvC,SAAiBQ,GACfV,QAAQgB,IAAIN,GAASE,MAAKK,IACxBtB,EAAoB,mBAAmB,G,CAbvCuB,CAAQrB,GAIZ,IAA4Ba,C","sources":["src/js/04-ipodrom.js"],"sourcesContent":["import '../css/common.css';\n\n\nconst horses = ['Mango', 'Sars', 'Alex', 'Iren', 'Favorite'];\n\nlet raceCounter = 0;\n\nconst refs = {\n  startBtn: document.querySelector('.js-start-race'),\n  winnerFeild: document.querySelector('.js-winner'),\n  progressFeild: document.querySelector('.js-progress'),\n  tableBody: document.querySelector('.js-results-table > tbody'),\n};\n\nrefs.startBtn.addEventListener('click', onStart);\n\nfunction onStart() {\n    raceCounter += 1;\n    const promises = horses.map(horse => run(horse));\n    updateWinnerField('');\n    updateProgressField('Почався заїзд');\n    determinatedWinner(promises);\n    waitAll(promises);\n\n}\n\nfunction determinatedWinner(horsesP) {\n  Promise.race(horsesP).then(({ horse, time }) => {\n    updateWinnerField(`Переміг ${horse} , фінішував за ${time}`);\n    updateResultsTable({ horse, time });\n  });\n}\n\nfunction waitAll(horsesP) {\n  Promise.all(horsesP).then(x => {\n    updateProgressField('Заїзд закінчився');\n  });\n}\nfunction updateWinnerField(message) {\n  refs.winnerFeild.textContent = message;\n}\nfunction updateProgressField(message) {\n  refs.progressFeild.textContent = message;\n}\n\nfunction updateResultsTable({ horse, time }) {\n  const tr = `<tr>\n                <td>${raceCounter}</td>\n                <td>${horse}</td>\n                <td>${time}</td>\n            </tr>`;\n  refs.tableBody.insertAdjacentHTML('beforeend', tr);\n}\n\n// run('name').then(x => {\n//   console.log(x);\n// });\n\n// console.log(promises);\n\nfunction run(horse) {\n  return new Promise(resolve => {\n    const time = getRandomTime(2000, 3500);\n    setTimeout(() => {\n      resolve({ horse, time });\n    }, time);\n  });\n}\n\n//   .catch(e => {\n//     console.log(e);\n//   });\n\nfunction getRandomTime(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n"],"names":["$80d9358a68ec9750$var$horses","$80d9358a68ec9750$var$raceCounter","$80d9358a68ec9750$var$refs","startBtn","document","querySelector","winnerFeild","progressFeild","tableBody","$80d9358a68ec9750$var$updateWinnerField","message","textContent","$80d9358a68ec9750$var$updateProgressField","addEventListener","promises","map","horse","Promise","resolve","time","min","max","Math","floor","random","setTimeout","$80d9358a68ec9750$var$run","horsesP","race","then","tr","insertAdjacentHTML","$80d9358a68ec9750$var$updateResultsTable","all","x","$80d9358a68ec9750$var$waitAll"],"version":3,"file":"ipodrom.b7010c49.js.map"}