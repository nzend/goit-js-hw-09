{"mappings":"YAGA,IAAMA,EAAS,CAAC,QAAS,OAAQ,OAAQ,OAAQ,YAE7CC,EAAc,EAEZC,EAAO,CACXC,SAAUC,SAASC,cAAc,kBACjCC,YAAaF,SAASC,cAAc,cACpCE,cAAeH,SAASC,cAAc,gBACtCG,UAAWJ,SAASC,cAAc,8BA2BpC,SAASI,EAAkBC,GACzBR,EAAKI,YAAYK,YAAcD,C,CAEjC,SAASE,EAAoBF,GAC3BR,EAAKK,cAAcI,YAAcD,C,CA5BnCR,EAAKC,SAASU,iBAAiB,SAE/B,WACIZ,GAAe,EACf,IAAMa,EAAWd,EAAOe,KAAI,SAAAC,G,OA0ChC,SAAaA,GACX,OAAO,IAAIC,SAAQ,SAAAC,GACjB,IAWmBC,EAAKC,EAXlBC,GAWaF,EAXQ,IAWHC,EAXS,KAY5BE,KAAKC,MAAMD,KAAKE,UAAYJ,EAAMD,EAAM,GAAKA,IAXlDM,YAAW,WACTP,EAAQ,CAAEF,QAAOK,Q,GAChBA,E,IA/CkCK,CAAIV,E,IACzCP,EAAkB,IAClBG,EAAoB,iBAMIe,EALLb,EAMrBG,QAAQW,KAAKD,GAASE,MAAK,SAAAC,G,IAAGd,EAAKc,EAALd,MAAOK,EAAIS,EAAJT,KACnCZ,EAAkB,WAA0CsB,OAAxBf,EAAM,oBAAkCe,OAALV,IAiB3E,SAA4BS,G,IAAEd,EAAFc,EAAEd,MAAOK,EAATS,EAAST,KAC7BW,EAAK,6BAESD,OADA9B,EAAY,+BAEZ8B,OADAf,EAAM,+BACDe,OAALV,EAAK,4BAEzBnB,EAAKM,UAAUyB,mBAAmB,YAAaD,E,CAtB3BE,CAAC,CAAElB,QAAOK,Q,IAIhC,SAAiBM,GACfV,QAAQkB,IAAIR,GAASE,MAAK,SAAAO,GACxBxB,EAAoB,mB,IAbpByB,CAAQvB,GAIZ,IAA4Ba,C","sources":["src/js/04-ipodrom.js"],"sourcesContent":["import '../css/common.css';\n\n\nconst horses = ['Mango', 'Sars', 'Alex', 'Iren', 'Favorite'];\n\nlet raceCounter = 0;\n\nconst refs = {\n  startBtn: document.querySelector('.js-start-race'),\n  winnerFeild: document.querySelector('.js-winner'),\n  progressFeild: document.querySelector('.js-progress'),\n  tableBody: document.querySelector('.js-results-table > tbody'),\n};\n\nrefs.startBtn.addEventListener('click', onStart);\n\nfunction onStart() {\n    raceCounter += 1;\n    const promises = horses.map(horse => run(horse));\n    updateWinnerField('');\n    updateProgressField('Почався заїзд');\n    determinatedWinner(promises);\n    waitAll(promises);\n\n}\n\nfunction determinatedWinner(horsesP) {\n  Promise.race(horsesP).then(({ horse, time }) => {\n    updateWinnerField(`Переміг ${horse} , фінішував за ${time}`);\n    updateResultsTable({ horse, time });\n  });\n}\n\nfunction waitAll(horsesP) {\n  Promise.all(horsesP).then(x => {\n    updateProgressField('Заїзд закінчився');\n  });\n}\nfunction updateWinnerField(message) {\n  refs.winnerFeild.textContent = message;\n}\nfunction updateProgressField(message) {\n  refs.progressFeild.textContent = message;\n}\n\nfunction updateResultsTable({ horse, time }) {\n  const tr = `<tr>\n                <td>${raceCounter}</td>\n                <td>${horse}</td>\n                <td>${time}</td>\n            </tr>`;\n  refs.tableBody.insertAdjacentHTML('beforeend', tr);\n}\n\n// run('name').then(x => {\n//   console.log(x);\n// });\n\n// console.log(promises);\n\nfunction run(horse) {\n  return new Promise(resolve => {\n    const time = getRandomTime(2000, 3500);\n    setTimeout(() => {\n      resolve({ horse, time });\n    }, time);\n  });\n}\n\n//   .catch(e => {\n//     console.log(e);\n//   });\n\nfunction getRandomTime(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n"],"names":["$26bb333ed6925688$var$horses","$26bb333ed6925688$var$raceCounter","$26bb333ed6925688$var$refs","startBtn","document","querySelector","winnerFeild","progressFeild","tableBody","$26bb333ed6925688$var$updateWinnerField","message","textContent","$26bb333ed6925688$var$updateProgressField","addEventListener","promises","map","horse","Promise","resolve","min","max","time","Math","floor","random","setTimeout","$26bb333ed6925688$var$run","horsesP","race","then","param","concat","tr","insertAdjacentHTML","$26bb333ed6925688$var$updateResultsTable","all","x","$26bb333ed6925688$var$waitAll"],"version":3,"file":"ipodrom.878fafa0.js.map"}